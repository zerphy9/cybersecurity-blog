содержание файла:
	1. параметры, обеспечивающие безопасность в системе
	2. команды и утилиты для управления пользователями
	3. файлы, отвечающие за безопасность
	4. контроль доступа NAC
	5. утилиты для усиленной безопасности linux

1. параметры, обеспечивающие безопасность в системе:
	удаление или отключение всех ненужных служб и программ
	удаление всех служб, использующие незашифрованные механизмы аутентификации
	NTP (Network Time Protocol для обновления системного времени) включен и работает Syslog
	наличие учетной записи под каждого пользователя
	наличие надежной пароли для каждого пользователя и его обновление
	блокировка учетных записей после неудачных попыток входа в систему
	отключить ненужные двоичные файлы SUID/SGID

2. команды и утилиты для управления пользователями:
	команды для управления разрешениями к файлу:
		r - читать; w - изменять; x - выполнить
		chmod <user>+/-<mode> <filename>: для изменения разрешения доступа к файлу для пользователей (u - владелец, g - группа, o - другие, a - все пользователи)
			примерный синтёчаксис: chmod a-r shell
		chown <user>:<group> <filename>: для изменения принадлежности файла к владельцу и/или группе
			примерный синтаксис: chown root:root shell
	команды для управления привилегиями пользователей:
		sudo <command>: для выполнения команды от имени суперпользователя
			-l -U <username>: для определения, имеется ли sudo у пользователя
		su <options> <username>: для (временного) переключения текущего пользователя на другого
			примерный синтаксис: su -c "whoami" alice
			опции:
				-с <command> <username>: выполнить одну команду от имени другого пользователя
				- <username>: полное переключение на пользователя с загрузкой его окружения
	команды для управления пользователями:
		useradd <options> <username>: для создания нового пользователя или обновления информации о новом пользователе
			примерный синтаксис: sudo useradd -s /bin/bash alice
			опции:
				-m: создает домашнюю директорию для пользователя /home/username (по умолчанию домашняя директория не создается)
				-s <fileway>: устанавливает оболочку для пользователя (для bash: -s /bin/bash)
				-G <group>: добавляет пользователя в группу (-G sudo: добавляет пользователя в группу sudo)
				-с "comment": задает описание пользователю
				-u <number>: задает UID (идентификатор пользователя)
				-g <number>: задает GID (идентификатор группы)
				-e <YYYY-MM-DD>: задает дату истечения срока действия учетной записи
		userdel: для удаления учетной записи и связанных с ним файлов
		usermod <options> <username>: для изменения параметров учетной записи пользователя
			примерный синтаксис: sudo usermod -l newname oldname
			опции:
				-l <newname> <oldname>: для переименовывания пользователя (не изменяет домашнюю директорию)
				-d <fileway> -m <username>: для указывания новой домашней директории (опция -m: для переноса содержимого старой домашней директории)
				-s <fileway>: для изменения оболочки
				-aG <groupname> <username>: для добавления пользователя в группу (-a: без удаления из других групп)
				-g <groupname> <username>: для изменения основной группы
				-L <username>: для блокировки учетной записи, отключая возможность входа в систему
				-U <username>: для разблокировки учетной записи
				-e <YYYY-MM-DD> <username>: для установки срока действия учетной записи
				-u <number> <username>: для изменения UID пользователя
		addgroup: добавляет группу в систему
		delgroup: удаляет группу из системы
		passwd: для изменения пароля пользователя

3. файлы, отвечающие за безопасность:
	/etc/sudoers: файл конфигурации, определяющая, какие пользователи и группы могут использовать команду sudo
		перед настройкой следует сохранить файл командой sudo visudo
		формат строки: <user/group> ALL=(ALL:ALL) ALL
	журналы - логи:
		логи ядра системы:
			содержат информацию об: аппаратных драйверах, системных вызовах, событиях ядра
			могут указывать на: наличие уязвимых или устаревших драйверов, сбоях системы
			хранится по адресу: /var/log/kern.log
		системные логи:
			содержат информацию о событиях на системном уровне: запуск и остановка служб, попытки входа и перезагрузки системы
			могут указывать на: наличие возможностей доступа к системе или действия в ней
			хранится по адресу: /var/log/syslog
		auth.log:
			содержат информацию о: всех событиях входа в систему, использования sudo, ключей SSH, отказа доступа и прочего связанного с безопасностью
			могут указывать на: попытки входа, неизвестных пользователей, отладки sudo, SSH
			хранится по адресу: /var/log/auth.log
		логи приложений:
			содержат информацию о: работе отдельного приложения
			могут указывать на: потенциальные уязвимости, неправильные настройки, утечки данных
			хранятся по адресу: /var/log/<app>/<app>.log

4. контроль доступа NAC:
	NAC - система безопасности, обеспечивающая доступ к данным только авторизованным и соответствующим требованиям устройствам
		предотвращает несанкционированный доступ, утечку данных и другие угрозы безопасности
	существуют следующие технологии NAC:
		DAC - доступ по усмотрению владельца:
			владельцы ресурсов сами решают, кто может получить доступ
			гибко, но не безопасно, так как любой пользователь может дать доступ другому
		MAC - обязательный контроль доступа
			владельцы ресурсов не вправе назначать или давать доступ, только админ
		RBAC - контроль доступа на основе ролей
			пользователям назначаются роли, где каждая роль имеет свои разрешения

5. утилиты для усиленной безопасности linux:
	SELinux - механизм управления доступом на основе MAC
		имя пакета для установки: selinux-basics selinux-policy-default auditd
		устройство SELinux:
			контекст безопасности - разрешение, которым обладает процесс или файл, для проверки на использование
				выглядит следующим образом: user:role:type:level
			режимы работы: enforcing, permissive, disabled
			политика: набор правил - кто к чему имеет доступ
			типовое усиление: разрешено только то что указано
			модули - позволяют расширить правила
				имеется возможность скачивания, или написания кодов
		основные команды:
			selinux-activate: активирует selinux, изменит /etc/selinux/config, создаст начальные контексты
				требуется перезагрузить устройство для запуска
			sestatus: проверить статус активации selinux
			setenforce(-0)(-1): для включения (-permissive)(-enforcing) режима
			getenforce: узнать текущий режим работы
			ls -Z: показать контекст файла
				имеет следующее строение: user:role:type:level
			ps -eZ: показать контекст процессов
			semanage fcontext: задать контекст файлу
				примерный синтаксис: semanage fcontext -a -t httpd_sys_content_t "/myweb(/.*)?"
				опции:
					-a: добавить правило
					-t: <type>: назначить тип правила
					-l: просмотр всех правил
					-d <filename>: для удаления правил
			restorecon: для подтверждения/аннулирования правила
				примерный синтаксис: sudo restorecon -v /secret/data.txt
				опции:
					-v <filename>: для применений правил касаемо файла
			audit2(-why)(-allow): (-анализ)(-решение) проблем на основе логов

	AppArmor - альтернатива SELinux, на основе MAC. не ограничивает пользователей, но ограничивает программу/файл, через которую пользователь обращается к программе/файлу
		название пакета: apparmor apparmor-utils
		устройство AppArmor:
			профили - определяют, какие действия разрешены конкретным файлам/программам
			режимы: unforce (жесткий контроль), complain (только лог)
		основные команды:
			aa-status: текущий статус и активные профили
			aa-complain: перевести профиль в режим complain (логирования)
				примерный синтаксис: sudo aa-complain /etc/apparmor.d/usr.bin.curl
			aa-enforce /etc/apparmor.d/<profile>: перевести профиль в unforce (жесткий контроль)
				примерный синтаксис: sudo aa-enforce /etc/apparmor.d/usr.bin.curl
			aa-logprof: автоматически обновить профиль по логам
			aa-genprof <fileway>: интерфейс для создания профиля. указывается местонахождение утилиты
				примерный синтаксис: sudo aa-genprof /usr/bin/curl
				указывается ссылка, к которой закрывается доступ:
					curl http://example.com
					curl /etc/shadow   # вызовет отказ (если в unforce)
			apparmor-parser: утилита для применения профилей
			aa-disable: для удаления профиля
				примерный синтаксис: sudo aa-disable /etc/apparmor.d/usr.bin.curl

	TCP Wrappers - старая технология контроля доступа по IP-адресам, для демонов, использующих libwrap
		ключевые файлы:
			/etc/hosts.allow - для адресов, которые разрешены
			/etc/hosts.deny - для запрещенных адресов
		пример строки в файле:
			sshd: 192.168.1.10 - в нужном файле разрешает/запрещает доступ к sshd с данным ip
			sshd: ALL - в нужном файле разрешает/запрещает доступ ко всем sshd
	
	fail2ban - утилита, подсчитывающая количество неудачных попыток входа в систему, после которого будут пресечены меры
		блокирует IP-адрес нарушителя с помощью фаервола
		файл конфигурации по адресу: /etcfail2ban/jail.conf
		файл лога по адресу: /var/log/fail2ban.log
		команды:
			fail2ban-client status: проверить статус
